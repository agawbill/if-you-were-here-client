{"ast":null,"code":"import _defineProperty from\"/home/anthony/Desktop/if-you-were-here/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/home/anthony/Desktop/if-you-were-here/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/anthony/Desktop/if-you-were-here/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import*as actionTypes from\"../actions/actionTypes\";var initialState={messages:[],filteredMessages:[],filters:{who:null,identity:null},sort:null,loading:false,error:null};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case actionTypes.FETCH_MESSAGES_START:return _objectSpread({},state,{loading:true,error:null});case actionTypes.FETCH_MESSAGES_SUCCESS:return _objectSpread({},state,{messages:_toConsumableArray(action.messages),loading:false,error:null});case actionTypes.FETCH_MESSAGES_FAIL:return _objectSpread({},state,{loading:false,error:\"\".concat(action.error)});case actionTypes.RESET_MESSAGES:return{loading:false,error:null};//filter & sort logic below-- has to be in this reducer as it needs to be in same scope as messages\ncase actionTypes.FILTER_MESSAGES_START:return _objectSpread({},state,{loading:true,error:null});case actionTypes.FILTER_MESSAGES_FAIL:return _objectSpread({},state,{loading:false,error:action.error});case actionTypes.FILTER_MESSAGES_ADD:return _objectSpread({},state,{filters:_objectSpread({},state.filters,_defineProperty({},action.name,action.filter))});case actionTypes.FILTER_MESSAGES_REMOVE:return _objectSpread({},state,{filters:_objectSpread({},state.filters,_defineProperty({},action.name,null))});case actionTypes.FILTER_MESSAGES:var _state$filters=state.filters,who=_state$filters.who,identity=_state$filters.identity;var messagesCopy=_toConsumableArray(state.messages);var newFilteredMessages=who&&identity?messagesCopy.filter(function(message){return message.who.name===who&&message.identity.name===identity;}):messagesCopy.filter(function(message){return message.who.name===who||message.identity.name===identity;});return _objectSpread({},state,{filteredMessages:_toConsumableArray(newFilteredMessages),loading:false,error:null});case actionTypes.FILTER_RESET:return _objectSpread({},state,{filteredMessages:[],loading:false,error:null});case actionTypes.SORT_MESSAGES_START:return _objectSpread({},state,{loading:true,error:null});case actionTypes.SORT_MESSAGES_FAIL:return _objectSpread({},state,{loading:false,error:action.error});case actionTypes.SORT_MESSAGES_ADD:return _objectSpread({},state,{sort:action.filter});case actionTypes.SORT_MESSAGES_REMOVE:return _objectSpread({},state,{sort:false});case actionTypes.SORT_MESSAGES:var filteredCopy=action.filtered?_toConsumableArray(state.filteredMessages):_toConsumableArray(state.messages);var sortedMessages=state.sort===\"Oldest\"?filteredCopy.sort(function(a,b){return new Date(a.createdAt)-new Date(b.createdAt);}):filteredCopy.sort(function(a,b){return new Date(b.createdAt)-new Date(a.createdAt);});return _objectSpread({},state,{filteredMessages:_toConsumableArray(sortedMessages),loading:false,error:null});case actionTypes.SORT_RESET:return _objectSpread({},state,{sort:null,loading:false,error:null});default:return state;}};export default reducer;","map":{"version":3,"sources":["/home/anthony/Desktop/if-you-were-here/client/src/store/reducers/messages.js"],"names":["actionTypes","initialState","messages","filteredMessages","filters","who","identity","sort","loading","error","reducer","state","action","type","FETCH_MESSAGES_START","FETCH_MESSAGES_SUCCESS","FETCH_MESSAGES_FAIL","RESET_MESSAGES","FILTER_MESSAGES_START","FILTER_MESSAGES_FAIL","FILTER_MESSAGES_ADD","name","filter","FILTER_MESSAGES_REMOVE","FILTER_MESSAGES","messagesCopy","newFilteredMessages","message","FILTER_RESET","SORT_MESSAGES_START","SORT_MESSAGES_FAIL","SORT_MESSAGES_ADD","SORT_MESSAGES_REMOVE","SORT_MESSAGES","filteredCopy","filtered","sortedMessages","a","b","Date","createdAt","SORT_RESET"],"mappings":"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","sourcesContent":["import * as actionTypes from \"../actions/actionTypes\";\n\nconst initialState = {\n  messages: [],\n  filteredMessages: [],\n  filters: { who: null, identity: null },\n  sort: null,\n  loading: false,\n  error: null,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.FETCH_MESSAGES_START:\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n    case actionTypes.FETCH_MESSAGES_SUCCESS:\n      return {\n        ...state,\n        messages: [...action.messages],\n        loading: false,\n        error: null,\n      };\n    case actionTypes.FETCH_MESSAGES_FAIL:\n      return {\n        ...state,\n        loading: false,\n        error: `${action.error}`,\n      };\n    case actionTypes.RESET_MESSAGES:\n      return {\n        loading: false,\n        error: null,\n      };\n\n    //filter & sort logic below-- has to be in this reducer as it needs to be in same scope as messages\n    case actionTypes.FILTER_MESSAGES_START:\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n    case actionTypes.FILTER_MESSAGES_FAIL:\n      return {\n        ...state,\n        loading: false,\n        error: action.error,\n      };\n    case actionTypes.FILTER_MESSAGES_ADD:\n      return {\n        ...state,\n        filters: {\n          ...state.filters,\n          [action.name]: action.filter,\n        },\n      };\n    case actionTypes.FILTER_MESSAGES_REMOVE:\n      return {\n        ...state,\n        filters: {\n          ...state.filters,\n          [action.name]: null,\n        },\n      };\n    case actionTypes.FILTER_MESSAGES:\n      const { who, identity } = state.filters;\n      const messagesCopy = [...state.messages];\n      const newFilteredMessages =\n        who && identity\n          ? messagesCopy.filter(\n              (message) =>\n                message.who.name === who && message.identity.name === identity\n            )\n          : messagesCopy.filter(\n              (message) =>\n                message.who.name === who || message.identity.name === identity\n            );\n      return {\n        ...state,\n        filteredMessages: [...newFilteredMessages],\n        loading: false,\n        error: null,\n      };\n    case actionTypes.FILTER_RESET:\n      return {\n        ...state,\n        filteredMessages: [],\n        loading: false,\n        error: null,\n      };\n    case actionTypes.SORT_MESSAGES_START:\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n    case actionTypes.SORT_MESSAGES_FAIL:\n      return {\n        ...state,\n        loading: false,\n        error: action.error,\n      };\n    case actionTypes.SORT_MESSAGES_ADD:\n      return {\n        ...state,\n        sort: action.filter,\n      };\n    case actionTypes.SORT_MESSAGES_REMOVE:\n      return {\n        ...state,\n        sort: false,\n      };\n    case actionTypes.SORT_MESSAGES:\n      const filteredCopy = action.filtered\n        ? [...state.filteredMessages]\n        : [...state.messages];\n      const sortedMessages =\n        state.sort === \"Oldest\"\n          ? filteredCopy.sort(\n              (a, b) => new Date(a.createdAt) - new Date(b.createdAt)\n            )\n          : filteredCopy.sort(\n              (a, b) => new Date(b.createdAt) - new Date(a.createdAt)\n            );\n      return {\n        ...state,\n        filteredMessages: [...sortedMessages],\n        loading: false,\n        error: null,\n      };\n    case actionTypes.SORT_RESET:\n      return {\n        ...state,\n        sort: null,\n        loading: false,\n        error: null,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}