{"ast":null,"code":"import _slicedToArray from\"/home/anthony/Desktop/if-you-were-here/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/anthony/Desktop/if-you-were-here/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useReducer,useEffect}from\"react\";import styles from\"./MessageForm.module.css\";import Modal from\"../../components/UI/Modal/Modal\";import Identity from\"../../components/Identity/Identity\";import Who from\"../../components/Who/Who\";import FormMessage from\"../../components/FormMessage/FormMessage\";import Summary from\"../../components/Summary/Summary\";import FormSpinner from\"../../components/UI/Spinners/FormSpinner/FormSpinner\";import{useDispatch,useSelector}from\"react-redux\";import{submitMessage,submitMessageReset}from\"../../store/actions\";import MessageComplete from\"../../components/MessageComplete/MessageComplete\";var initialState={identity:{identityId:null,identityName:null},who:{whoId:null,whoName:null},message:\" \"};var formReducer=function formReducer(formState,action){switch(action.type){case\"identity\":return _objectSpread({},formState,{identity:_objectSpread({},formState.identity,{},action.value)});case\"who\":return _objectSpread({},formState,{who:_objectSpread({},formState.who,{},action.value)});case\"message\":return _objectSpread({},formState,{message:action.value});case\"reset\":return _objectSpread({},initialState);case\"submit\":return _objectSpread({},formState);default:break;}};var MessageForm=function MessageForm(){var _useReducer=useReducer(formReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),formState=_useReducer2[0],dispatchForm=_useReducer2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),sectionIndex=_useState4[0],setSectionIndex=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),submitSuccess=_useState6[0],setSubmitSuccess=_useState6[1];var messageSuccess=useSelector(function(state){return state.message.messageSuccess;});var messageLoading=useSelector(function(state){return state.message.loading;});var dispatch=useDispatch();useEffect(function(){if(messageSuccess){setSubmitSuccess(true);dispatchForm({type:\"reset\"});dispatch(submitMessageReset());}},[messageSuccess,dispatch]);var openHandler=function openHandler(){return setOpen(function(oldState){return!oldState;});};var successHandler=function successHandler(){dispatch(submitMessageReset());openHandler();setSectionIndex(0);};var switchHandler=function switchHandler(type,name,formValue){if(type===\"next\"&&sectionIndex===sections.length-1){setSectionIndex(function(prevIndex){return prevIndex;});dispatchForm({type:name,value:formValue});}else if(type===\"next\"){setSectionIndex(function(prevIndex){return prevIndex+1;});dispatchForm({type:name,value:formValue});}else if(type===\"prev\"){setSectionIndex(function(prevIndex){return prevIndex-1;});dispatchForm({type:name,value:formValue});}else if(type===\"submit\"){dispatchForm({type:name});var body={identity:formState.identity.identityId,who:formState.who.whoId,message:formState.message};dispatch(submitMessage(body));setSectionIndex(4);}};var sections=[React.createElement(Identity,{switchHandler:switchHandler,identityValue:formState.identity}),React.createElement(Who,{switchHandler:switchHandler,whoValue:formState.who}),React.createElement(FormMessage,{switchHandler:switchHandler,messageValue:formState.message}),React.createElement(Summary,{switchHandler:switchHandler,messageValue:formState.message,whoValue:formState.who,identityValue:formState.identity}),React.createElement(MessageComplete,{success:submitSuccess,resetSuccess:successHandler})];var messageFormBody=sections[sectionIndex];if(messageLoading){messageFormBody=React.createElement(FormSpinner,null);}return React.createElement(React.Fragment,null,React.createElement(Modal,{open:open,openHandler:openHandler},messageFormBody),React.createElement(\"div\",{className:styles.TextBox,onClick:function onClick(){return openHandler();}},\"Enter Here \",React.createElement(\"span\",{className:styles.TypeWriter},\"|\")));};export default MessageForm;","map":{"version":3,"sources":["/home/anthony/Desktop/if-you-were-here/client/src/containers/MessageForm/MessageForm.js"],"names":["React","useState","useReducer","useEffect","styles","Modal","Identity","Who","FormMessage","Summary","FormSpinner","useDispatch","useSelector","submitMessage","submitMessageReset","MessageComplete","initialState","identity","identityId","identityName","who","whoId","whoName","message","formReducer","formState","action","type","value","MessageForm","dispatchForm","open","setOpen","sectionIndex","setSectionIndex","submitSuccess","setSubmitSuccess","messageSuccess","state","messageLoading","loading","dispatch","openHandler","oldState","successHandler","switchHandler","name","formValue","sections","length","prevIndex","body","messageFormBody","TextBox","TypeWriter"],"mappings":"uUAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,iCAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,oCAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,0BAAhB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0CAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kCAApB,CACA,MAAOC,CAAAA,WAAP,KAAwB,sDAAxB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,aAAT,CAAwBC,kBAAxB,KAAkD,qBAAlD,CACA,MAAOC,CAAAA,eAAP,KAA4B,kDAA5B,CAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,QAAQ,CAAE,CAAEC,UAAU,CAAE,IAAd,CAAoBC,YAAY,CAAE,IAAlC,CADS,CAEnBC,GAAG,CAAE,CAAEC,KAAK,CAAE,IAAT,CAAeC,OAAO,CAAE,IAAxB,CAFc,CAGnBC,OAAO,CAAE,GAHU,CAArB,CAMA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,SAAD,CAAYC,MAAZ,CAAuB,CACzC,OAAQA,MAAM,CAACC,IAAf,EACE,IAAK,UAAL,CACE,wBACKF,SADL,EAEER,QAAQ,kBACHQ,SAAS,CAACR,QADP,IAEHS,MAAM,CAACE,KAFJ,CAFV,GAOF,IAAK,KAAL,CACE,wBACKH,SADL,EAEEL,GAAG,kBACEK,SAAS,CAACL,GADZ,IAEEM,MAAM,CAACE,KAFT,CAFL,GAOF,IAAK,SAAL,CACE,wBACKH,SADL,EAEEF,OAAO,CAAEG,MAAM,CAACE,KAFlB,GAIF,IAAK,OAAL,CACE,wBACKZ,YADL,EAGF,IAAK,QAAL,CACE,wBACKS,SADL,EAGF,QACE,MA/BJ,CAiCD,CAlCD,CAoCA,GAAMI,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,iBACU3B,UAAU,CAACsB,WAAD,CAAcR,YAAd,CADpB,4CACjBS,SADiB,iBACNK,YADM,+BAEA7B,QAAQ,CAAC,KAAD,CAFR,wCAEjB8B,IAFiB,eAEXC,OAFW,8BAGgB/B,QAAQ,CAAC,CAAD,CAHxB,yCAGjBgC,YAHiB,eAGHC,eAHG,8BAIkBjC,QAAQ,CAAC,CAAD,CAJ1B,yCAIjBkC,aAJiB,eAIFC,gBAJE,eAKxB,GAAMC,CAAAA,cAAc,CAAGzB,WAAW,CAAC,SAAC0B,KAAD,QAAWA,CAAAA,KAAK,CAACf,OAAN,CAAcc,cAAzB,EAAD,CAAlC,CACA,GAAME,CAAAA,cAAc,CAAG3B,WAAW,CAAC,SAAC0B,KAAD,QAAWA,CAAAA,KAAK,CAACf,OAAN,CAAciB,OAAzB,EAAD,CAAlC,CACA,GAAMC,CAAAA,QAAQ,CAAG9B,WAAW,EAA5B,CAEAR,SAAS,CAAC,UAAM,CACd,GAAIkC,cAAJ,CAAoB,CAClBD,gBAAgB,CAAC,IAAD,CAAhB,CACAN,YAAY,CAAC,CAAEH,IAAI,CAAE,OAAR,CAAD,CAAZ,CACAc,QAAQ,CAAC3B,kBAAkB,EAAnB,CAAR,CACD,CACF,CANQ,CAMN,CAACuB,cAAD,CAAiBI,QAAjB,CANM,CAAT,CAQA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAMV,CAAAA,OAAO,CAAC,SAACW,QAAD,QAAc,CAACA,QAAf,EAAD,CAAb,EAApB,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BH,QAAQ,CAAC3B,kBAAkB,EAAnB,CAAR,CACA4B,WAAW,GACXR,eAAe,CAAC,CAAD,CAAf,CACD,CAJD,CAMA,GAAMW,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAClB,IAAD,CAAOmB,IAAP,CAAaC,SAAb,CAA2B,CAC/C,GAAIpB,IAAI,GAAK,MAAT,EAAmBM,YAAY,GAAKe,QAAQ,CAACC,MAAT,CAAkB,CAA1D,CAA6D,CAC3Df,eAAe,CAAC,SAACgB,SAAD,QAAeA,CAAAA,SAAf,EAAD,CAAf,CACApB,YAAY,CAAC,CAAEH,IAAI,CAAEmB,IAAR,CAAclB,KAAK,CAAEmB,SAArB,CAAD,CAAZ,CACD,CAHD,IAGO,IAAIpB,IAAI,GAAK,MAAb,CAAqB,CAC1BO,eAAe,CAAC,SAACgB,SAAD,QAAeA,CAAAA,SAAS,CAAG,CAA3B,EAAD,CAAf,CACApB,YAAY,CAAC,CAAEH,IAAI,CAAEmB,IAAR,CAAclB,KAAK,CAAEmB,SAArB,CAAD,CAAZ,CACD,CAHM,IAGA,IAAIpB,IAAI,GAAK,MAAb,CAAqB,CAC1BO,eAAe,CAAC,SAACgB,SAAD,QAAeA,CAAAA,SAAS,CAAG,CAA3B,EAAD,CAAf,CACApB,YAAY,CAAC,CAAEH,IAAI,CAAEmB,IAAR,CAAclB,KAAK,CAAEmB,SAArB,CAAD,CAAZ,CACD,CAHM,IAGA,IAAIpB,IAAI,GAAK,QAAb,CAAuB,CAC5BG,YAAY,CAAC,CAAEH,IAAI,CAAEmB,IAAR,CAAD,CAAZ,CACA,GAAMK,CAAAA,IAAI,CAAG,CACXlC,QAAQ,CAAEQ,SAAS,CAACR,QAAV,CAAmBC,UADlB,CAEXE,GAAG,CAAEK,SAAS,CAACL,GAAV,CAAcC,KAFR,CAGXE,OAAO,CAAEE,SAAS,CAACF,OAHR,CAAb,CAKAkB,QAAQ,CAAC5B,aAAa,CAACsC,IAAD,CAAd,CAAR,CACAjB,eAAe,CAAC,CAAD,CAAf,CACD,CACF,CApBD,CAsBA,GAAMc,CAAAA,QAAQ,CAAG,CACf,oBAAC,QAAD,EACE,aAAa,CAAEH,aADjB,CAEE,aAAa,CAAEpB,SAAS,CAACR,QAF3B,EADe,CAKf,oBAAC,GAAD,EAAK,aAAa,CAAE4B,aAApB,CAAmC,QAAQ,CAAEpB,SAAS,CAACL,GAAvD,EALe,CAMf,oBAAC,WAAD,EACE,aAAa,CAAEyB,aADjB,CAEE,YAAY,CAAEpB,SAAS,CAACF,OAF1B,EANe,CAUf,oBAAC,OAAD,EACE,aAAa,CAAEsB,aADjB,CAEE,YAAY,CAAEpB,SAAS,CAACF,OAF1B,CAGE,QAAQ,CAAEE,SAAS,CAACL,GAHtB,CAIE,aAAa,CAAEK,SAAS,CAACR,QAJ3B,EAVe,CAgBf,oBAAC,eAAD,EAAiB,OAAO,CAAEkB,aAA1B,CAAyC,YAAY,CAAES,cAAvD,EAhBe,CAAjB,CAmBA,GAAIQ,CAAAA,eAAe,CAAGJ,QAAQ,CAACf,YAAD,CAA9B,CAEA,GAAIM,cAAJ,CAAoB,CAClBa,eAAe,CAAG,oBAAC,WAAD,MAAlB,CACD,CAED,MACE,yCACE,oBAAC,KAAD,EAAO,IAAI,CAAErB,IAAb,CAAmB,WAAW,CAAEW,WAAhC,EACGU,eADH,CADF,CAIE,2BAAK,SAAS,CAAEhD,MAAM,CAACiD,OAAvB,CAAgC,OAAO,CAAE,yBAAMX,CAAAA,WAAW,EAAjB,EAAzC,gBACa,4BAAM,SAAS,CAAEtC,MAAM,CAACkD,UAAxB,MADb,CAJF,CADF,CAUD,CAlFD,CAoFA,cAAezB,CAAAA,WAAf","sourcesContent":["import React, { useState, useReducer, useEffect } from \"react\";\nimport styles from \"./MessageForm.module.css\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport Identity from \"../../components/Identity/Identity\";\nimport Who from \"../../components/Who/Who\";\nimport FormMessage from \"../../components/FormMessage/FormMessage\";\nimport Summary from \"../../components/Summary/Summary\";\nimport FormSpinner from \"../../components/UI/Spinners/FormSpinner/FormSpinner\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { submitMessage, submitMessageReset } from \"../../store/actions\";\nimport MessageComplete from \"../../components/MessageComplete/MessageComplete\";\n\nconst initialState = {\n  identity: { identityId: null, identityName: null },\n  who: { whoId: null, whoName: null },\n  message: \" \",\n};\n\nconst formReducer = (formState, action) => {\n  switch (action.type) {\n    case \"identity\":\n      return {\n        ...formState,\n        identity: {\n          ...formState.identity,\n          ...action.value,\n        },\n      };\n    case \"who\":\n      return {\n        ...formState,\n        who: {\n          ...formState.who,\n          ...action.value,\n        },\n      };\n    case \"message\":\n      return {\n        ...formState,\n        message: action.value,\n      };\n    case \"reset\":\n      return {\n        ...initialState,\n      };\n    case \"submit\":\n      return {\n        ...formState,\n      };\n    default:\n      break;\n  }\n};\n\nconst MessageForm = () => {\n  const [formState, dispatchForm] = useReducer(formReducer, initialState);\n  const [open, setOpen] = useState(false);\n  const [sectionIndex, setSectionIndex] = useState(0);\n  const [submitSuccess, setSubmitSuccess] = useState(0);\n  const messageSuccess = useSelector((state) => state.message.messageSuccess);\n  const messageLoading = useSelector((state) => state.message.loading);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (messageSuccess) {\n      setSubmitSuccess(true);\n      dispatchForm({ type: \"reset\" });\n      dispatch(submitMessageReset());\n    }\n  }, [messageSuccess, dispatch]);\n\n  const openHandler = () => setOpen((oldState) => !oldState);\n\n  const successHandler = () => {\n    dispatch(submitMessageReset());\n    openHandler();\n    setSectionIndex(0);\n  };\n\n  const switchHandler = (type, name, formValue) => {\n    if (type === \"next\" && sectionIndex === sections.length - 1) {\n      setSectionIndex((prevIndex) => prevIndex);\n      dispatchForm({ type: name, value: formValue });\n    } else if (type === \"next\") {\n      setSectionIndex((prevIndex) => prevIndex + 1);\n      dispatchForm({ type: name, value: formValue });\n    } else if (type === \"prev\") {\n      setSectionIndex((prevIndex) => prevIndex - 1);\n      dispatchForm({ type: name, value: formValue });\n    } else if (type === \"submit\") {\n      dispatchForm({ type: name });\n      const body = {\n        identity: formState.identity.identityId,\n        who: formState.who.whoId,\n        message: formState.message,\n      };\n      dispatch(submitMessage(body));\n      setSectionIndex(4);\n    }\n  };\n\n  const sections = [\n    <Identity\n      switchHandler={switchHandler}\n      identityValue={formState.identity}\n    />,\n    <Who switchHandler={switchHandler} whoValue={formState.who} />,\n    <FormMessage\n      switchHandler={switchHandler}\n      messageValue={formState.message}\n    />,\n    <Summary\n      switchHandler={switchHandler}\n      messageValue={formState.message}\n      whoValue={formState.who}\n      identityValue={formState.identity}\n    />,\n    <MessageComplete success={submitSuccess} resetSuccess={successHandler} />,\n  ];\n\n  let messageFormBody = sections[sectionIndex];\n\n  if (messageLoading) {\n    messageFormBody = <FormSpinner />;\n  }\n\n  return (\n    <>\n      <Modal open={open} openHandler={openHandler}>\n        {messageFormBody}\n      </Modal>\n      <div className={styles.TextBox} onClick={() => openHandler()}>\n        Enter Here <span className={styles.TypeWriter}>|</span>\n      </div>\n    </>\n  );\n};\n\nexport default MessageForm;\n"]},"metadata":{},"sourceType":"module"}