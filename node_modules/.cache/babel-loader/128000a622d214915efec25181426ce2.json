{"ast":null,"code":"export default function updateMutation(mutation, originalOffset, originalLength, newLength, prefixLength, suffixLength) {\n  // three cases we can reasonably adjust - disjoint mutations that\n  // happen later on where the offset will need to be changed,\n  // mutations that completely contain the new one where we can adjust\n  // the length, and mutations that occur partially within the new one.\n  var lengthDiff = newLength - originalLength;\n  var mutationAfterChange = originalOffset + originalLength <= mutation.offset;\n\n  if (mutationAfterChange) {\n    return Object.assign({}, mutation, {\n      offset: mutation.offset + lengthDiff\n    });\n  }\n\n  var mutationContainsChange = originalOffset >= mutation.offset && originalOffset + originalLength <= mutation.offset + mutation.length;\n\n  if (mutationContainsChange) {\n    return Object.assign({}, mutation, {\n      length: mutation.length + lengthDiff\n    });\n  }\n\n  var mutationWithinPrefixChange = mutation.offset >= originalOffset && mutation.offset + mutation.length <= originalOffset + originalLength && prefixLength > 0;\n\n  if (mutationWithinPrefixChange) {\n    return Object.assign({}, mutation, {\n      offset: mutation.offset + prefixLength\n    });\n  }\n\n  var mutationContainsPrefix = mutation.offset < originalOffset && mutation.offset + mutation.length <= originalOffset + originalLength && mutation.offset + mutation.length > originalOffset && prefixLength > 0;\n\n  if (mutationContainsPrefix) {\n    return [Object.assign({}, mutation, {\n      length: originalOffset - mutation.offset\n    }), Object.assign({}, mutation, {\n      offset: originalOffset + prefixLength,\n      length: mutation.offset - originalOffset + mutation.length\n    })];\n  }\n\n  var mutationContainsSuffix = mutation.offset >= originalOffset && mutation.offset + mutation.length > originalOffset + originalLength && originalOffset + originalLength > mutation.offset && suffixLength > 0;\n\n  if (mutationContainsSuffix) {\n    return [Object.assign({}, mutation, {\n      offset: mutation.offset + prefixLength,\n      length: originalOffset + originalLength - mutation.offset\n    }), Object.assign({}, mutation, {\n      offset: originalOffset + originalLength + prefixLength + suffixLength,\n      length: mutation.offset + mutation.length - (originalOffset + originalLength)\n    })];\n  }\n\n  return mutation;\n}","map":{"version":3,"sources":["/home/anthony/Desktop/if-you-were-here/node_modules/draft-convert/esm/util/updateMutation.js"],"names":["updateMutation","mutation","originalOffset","originalLength","newLength","prefixLength","suffixLength","lengthDiff","mutationAfterChange","offset","Object","assign","mutationContainsChange","length","mutationWithinPrefixChange","mutationContainsPrefix","mutationContainsSuffix"],"mappings":"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","sourcesContent":["export default function updateMutation(mutation, originalOffset, originalLength, newLength, prefixLength, suffixLength) {\n  // three cases we can reasonably adjust - disjoint mutations that\n  // happen later on where the offset will need to be changed,\n  // mutations that completely contain the new one where we can adjust\n  // the length, and mutations that occur partially within the new one.\n  var lengthDiff = newLength - originalLength;\n  var mutationAfterChange = originalOffset + originalLength <= mutation.offset;\n\n  if (mutationAfterChange) {\n    return Object.assign({}, mutation, {\n      offset: mutation.offset + lengthDiff\n    });\n  }\n\n  var mutationContainsChange = originalOffset >= mutation.offset && originalOffset + originalLength <= mutation.offset + mutation.length;\n\n  if (mutationContainsChange) {\n    return Object.assign({}, mutation, {\n      length: mutation.length + lengthDiff\n    });\n  }\n\n  var mutationWithinPrefixChange = mutation.offset >= originalOffset && mutation.offset + mutation.length <= originalOffset + originalLength && prefixLength > 0;\n\n  if (mutationWithinPrefixChange) {\n    return Object.assign({}, mutation, {\n      offset: mutation.offset + prefixLength\n    });\n  }\n\n  var mutationContainsPrefix = mutation.offset < originalOffset && mutation.offset + mutation.length <= originalOffset + originalLength && mutation.offset + mutation.length > originalOffset && prefixLength > 0;\n\n  if (mutationContainsPrefix) {\n    return [Object.assign({}, mutation, {\n      length: originalOffset - mutation.offset\n    }), Object.assign({}, mutation, {\n      offset: originalOffset + prefixLength,\n      length: mutation.offset - originalOffset + mutation.length\n    })];\n  }\n\n  var mutationContainsSuffix = mutation.offset >= originalOffset && mutation.offset + mutation.length > originalOffset + originalLength && originalOffset + originalLength > mutation.offset && suffixLength > 0;\n\n  if (mutationContainsSuffix) {\n    return [Object.assign({}, mutation, {\n      offset: mutation.offset + prefixLength,\n      length: originalOffset + originalLength - mutation.offset\n    }), Object.assign({}, mutation, {\n      offset: originalOffset + originalLength + prefixLength + suffixLength,\n      length: mutation.offset + mutation.length - (originalOffset + originalLength)\n    })];\n  }\n\n  return mutation;\n}"]},"metadata":{},"sourceType":"module"}