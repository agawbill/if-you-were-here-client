{"ast":null,"code":"import _slicedToArray from\"/home/anthony/Desktop/if-you-were-here/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/anthony/Desktop/if-you-were-here/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useReducer,useEffect}from\"react\";import styles from\"./PostForm.module.css\";import Modal from\"../../components/UI/Modal/Modal\";import Identity from\"../../components/Identity/Identity\";import Who from\"../../components/Who/Who\";import Message from\"../../components/Message/Message\";import Summary from\"../../components/Summary/Summary\";import FormSpinner from\"../../components/UI/Spinners/FormSpinner/FormSpinner\";import{useDispatch,useSelector}from\"react-redux\";import{submitPost,submitPostReset}from\"../../store/actions\";var initialState={identity:null,who:null,message:\"\"};var formReducer=function formReducer(formState,action){switch(action.type){case\"identity\":return _objectSpread({},formState,{identity:action.value});case\"who\":return _objectSpread({},formState,{who:action.value});case\"message\":return _objectSpread({},formState,{message:action.value});case\"reset\":return _objectSpread({},initialState);case\"submit\":return _objectSpread({},formState);default:break;}};var PostForm=function PostForm(){var _useReducer=useReducer(formReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),formState=_useReducer2[0],dispatchForm=_useReducer2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),sectionIndex=_useState4[0],setSectionIndex=_useState4[1];var postSuccess=useSelector(function(state){return state.postSuccess;});var postError=useSelector(function(state){return state.error;});var postLoading=useSelector(function(state){return state.loading;});var dispatch=useDispatch();useEffect(function(){if(postSuccess){dispatchForm({type:\"reset\"});dispatch(submitPostReset());}},[postSuccess,dispatch]);var openHandler=function openHandler(){return setOpen(function(oldState){return!oldState;});};var switchHandler=function switchHandler(type,name,formValue){if(type===\"next\"&&sectionIndex===sections.length-1){setSectionIndex(function(prevIndex){return prevIndex;});dispatchForm({type:name,value:formValue});}else if(type===\"next\"){setSectionIndex(function(prevIndex){return prevIndex+1;});dispatchForm({type:name,value:formValue});}else if(type===\"prev\"){setSectionIndex(function(prevIndex){return prevIndex-1;});dispatchForm({type:name,value:formValue});}else{dispatchForm({type:name});var id=Array(15).fill(null).map(function(){return Math.random().toString(36).substr(2);}).join(\"\");var date=new Date();var body={id:id,date:date,identity:formState.identity,who:formState.who,message:formState.message};dispatch(submitPost(body));setSectionIndex(0);}};var sections=[React.createElement(Identity,{switchHandler:switchHandler,identityValue:formState.identity}),React.createElement(Who,{switchHandler:switchHandler,whoValue:formState.who}),React.createElement(Message,{switchHandler:switchHandler,messageValue:formState.message}),React.createElement(Summary,{switchHandler:switchHandler,messageValue:formState.message,whoValue:formState.who,identityValue:formState.identity})];var postFormBody=sections[sectionIndex];if(postLoading){postFormBody=React.createElement(FormSpinner,null);}else if(postError){postFormBody=postError;}return React.createElement(React.Fragment,null,React.createElement(Modal,{open:open,openHandler:openHandler},postFormBody),React.createElement(\"div\",{className:styles.TextBox,onClick:function onClick(){return openHandler();}},\"Enter Here \",React.createElement(\"span\",{className:styles.TypeWriter},\"|\")));};export default PostForm;","map":{"version":3,"sources":["/home/anthony/Desktop/if-you-were-here/client/src/containers/PostForm/PostForm.js"],"names":["React","useState","useReducer","useEffect","styles","Modal","Identity","Who","Message","Summary","FormSpinner","useDispatch","useSelector","submitPost","submitPostReset","initialState","identity","who","message","formReducer","formState","action","type","value","PostForm","dispatchForm","open","setOpen","sectionIndex","setSectionIndex","postSuccess","state","postError","error","postLoading","loading","dispatch","openHandler","oldState","switchHandler","name","formValue","sections","length","prevIndex","id","Array","fill","map","Math","random","toString","substr","join","date","Date","body","postFormBody","TextBox","TypeWriter"],"mappings":"uUAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,MAAP,KAAmB,uBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,iCAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,oCAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,0BAAhB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kCAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kCAApB,CACA,MAAOC,CAAAA,WAAP,KAAwB,sDAAxB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,CAAqBC,eAArB,KAA4C,qBAA5C,CAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,QAAQ,CAAE,IADS,CAEnBC,GAAG,CAAE,IAFc,CAGnBC,OAAO,CAAE,EAHU,CAArB,CAMA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,SAAD,CAAYC,MAAZ,CAAuB,CACzC,OAAQA,MAAM,CAACC,IAAf,EACE,IAAK,UAAL,CACE,wBACKF,SADL,EAEEJ,QAAQ,CAAEK,MAAM,CAACE,KAFnB,GAIF,IAAK,KAAL,CACE,wBACKH,SADL,EAEEH,GAAG,CAAEI,MAAM,CAACE,KAFd,GAIF,IAAK,SAAL,CACE,wBACKH,SADL,EAEEF,OAAO,CAAEG,MAAM,CAACE,KAFlB,GAIF,IAAK,OAAL,CACE,wBACKR,YADL,EAGF,IAAK,QAAL,CACE,wBACKK,SADL,EAGF,QACE,MAzBJ,CA2BD,CA5BD,CA8BA,GAAMI,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,iBACatB,UAAU,CAACiB,WAAD,CAAcJ,YAAd,CADvB,4CACdK,SADc,iBACHK,YADG,+BAEGxB,QAAQ,CAAC,KAAD,CAFX,wCAEdyB,IAFc,eAERC,OAFQ,8BAGmB1B,QAAQ,CAAC,CAAD,CAH3B,yCAGd2B,YAHc,eAGAC,eAHA,eAIrB,GAAMC,CAAAA,WAAW,CAAGlB,WAAW,CAAC,SAAAmB,KAAK,QAAIA,CAAAA,KAAK,CAACD,WAAV,EAAN,CAA/B,CACA,GAAME,CAAAA,SAAS,CAAGpB,WAAW,CAAC,SAAAmB,KAAK,QAAIA,CAAAA,KAAK,CAACE,KAAV,EAAN,CAA7B,CACA,GAAMC,CAAAA,WAAW,CAAGtB,WAAW,CAAC,SAAAmB,KAAK,QAAIA,CAAAA,KAAK,CAACI,OAAV,EAAN,CAA/B,CACA,GAAMC,CAAAA,QAAQ,CAAGzB,WAAW,EAA5B,CAEAR,SAAS,CAAC,UAAM,CACd,GAAI2B,WAAJ,CAAiB,CACfL,YAAY,CAAC,CAAEH,IAAI,CAAE,OAAR,CAAD,CAAZ,CACAc,QAAQ,CAACtB,eAAe,EAAhB,CAAR,CACD,CACF,CALQ,CAKN,CAACgB,WAAD,CAAcM,QAAd,CALM,CAAT,CAOA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAMV,CAAAA,OAAO,CAAC,SAAAW,QAAQ,QAAI,CAACA,QAAL,EAAT,CAAb,EAApB,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACjB,IAAD,CAAOkB,IAAP,CAAaC,SAAb,CAA2B,CAC/C,GAAInB,IAAI,GAAK,MAAT,EAAmBM,YAAY,GAAKc,QAAQ,CAACC,MAAT,CAAkB,CAA1D,CAA6D,CAC3Dd,eAAe,CAAC,SAAAe,SAAS,QAAIA,CAAAA,SAAJ,EAAV,CAAf,CACAnB,YAAY,CAAC,CAAEH,IAAI,CAAEkB,IAAR,CAAcjB,KAAK,CAAEkB,SAArB,CAAD,CAAZ,CACD,CAHD,IAGO,IAAInB,IAAI,GAAK,MAAb,CAAqB,CAC1BO,eAAe,CAAC,SAAAe,SAAS,QAAIA,CAAAA,SAAS,CAAG,CAAhB,EAAV,CAAf,CACAnB,YAAY,CAAC,CAAEH,IAAI,CAAEkB,IAAR,CAAcjB,KAAK,CAAEkB,SAArB,CAAD,CAAZ,CACD,CAHM,IAGA,IAAInB,IAAI,GAAK,MAAb,CAAqB,CAC1BO,eAAe,CAAC,SAAAe,SAAS,QAAIA,CAAAA,SAAS,CAAG,CAAhB,EAAV,CAAf,CACAnB,YAAY,CAAC,CAAEH,IAAI,CAAEkB,IAAR,CAAcjB,KAAK,CAAEkB,SAArB,CAAD,CAAZ,CACD,CAHM,IAGA,CACLhB,YAAY,CAAC,CAAEH,IAAI,CAAEkB,IAAR,CAAD,CAAZ,CACA,GAAMK,CAAAA,EAAE,CAAGC,KAAK,CAAC,EAAD,CAAL,CACRC,IADQ,CACH,IADG,EAERC,GAFQ,CAEJ,iBACHC,CAAAA,IAAI,CAACC,MAAL,GACGC,QADH,CACY,EADZ,EAEGC,MAFH,CAEU,CAFV,CADG,EAFI,EAORC,IAPQ,CAOH,EAPG,CAAX,CAQA,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,EAAb,CACA,GAAMC,CAAAA,IAAI,CAAG,CACXX,EAAE,CAAFA,EADW,CAEXS,IAAI,CAAJA,IAFW,CAGXtC,QAAQ,CAAEI,SAAS,CAACJ,QAHT,CAIXC,GAAG,CAAEG,SAAS,CAACH,GAJJ,CAKXC,OAAO,CAAEE,SAAS,CAACF,OALR,CAAb,CAOAkB,QAAQ,CAACvB,UAAU,CAAC2C,IAAD,CAAX,CAAR,CACA3B,eAAe,CAAC,CAAD,CAAf,CACD,CACF,CA/BD,CAiCA,GAAMa,CAAAA,QAAQ,CAAG,CACf,oBAAC,QAAD,EACE,aAAa,CAAEH,aADjB,CAEE,aAAa,CAAEnB,SAAS,CAACJ,QAF3B,EADe,CAKf,oBAAC,GAAD,EAAK,aAAa,CAAEuB,aAApB,CAAmC,QAAQ,CAAEnB,SAAS,CAACH,GAAvD,EALe,CAMf,oBAAC,OAAD,EAAS,aAAa,CAAEsB,aAAxB,CAAuC,YAAY,CAAEnB,SAAS,CAACF,OAA/D,EANe,CAOf,oBAAC,OAAD,EACE,aAAa,CAAEqB,aADjB,CAEE,YAAY,CAAEnB,SAAS,CAACF,OAF1B,CAGE,QAAQ,CAAEE,SAAS,CAACH,GAHtB,CAIE,aAAa,CAAEG,SAAS,CAACJ,QAJ3B,EAPe,CAAjB,CAeA,GAAIyC,CAAAA,YAAY,CAAGf,QAAQ,CAACd,YAAD,CAA3B,CAEA,GAAIM,WAAJ,CAAiB,CACfuB,YAAY,CAAG,oBAAC,WAAD,MAAf,CACD,CAFD,IAEO,IAAIzB,SAAJ,CAAe,CACpByB,YAAY,CAAGzB,SAAf,CACD,CAED,MACE,yCACE,oBAAC,KAAD,EAAO,IAAI,CAAEN,IAAb,CAAmB,WAAW,CAAEW,WAAhC,EACGoB,YADH,CADF,CAIE,2BAAK,SAAS,CAAErD,MAAM,CAACsD,OAAvB,CAAgC,OAAO,CAAE,yBAAMrB,CAAAA,WAAW,EAAjB,EAAzC,gBACa,4BAAM,SAAS,CAAEjC,MAAM,CAACuD,UAAxB,MADb,CAJF,CADF,CAUD,CApFD,CAsFA,cAAenC,CAAAA,QAAf","sourcesContent":["import React, { useState, useReducer, useEffect } from \"react\";\nimport styles from \"./PostForm.module.css\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport Identity from \"../../components/Identity/Identity\";\nimport Who from \"../../components/Who/Who\";\nimport Message from \"../../components/Message/Message\";\nimport Summary from \"../../components/Summary/Summary\";\nimport FormSpinner from \"../../components/UI/Spinners/FormSpinner/FormSpinner\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { submitPost, submitPostReset } from \"../../store/actions\";\n\nconst initialState = {\n  identity: null,\n  who: null,\n  message: \"\"\n};\n\nconst formReducer = (formState, action) => {\n  switch (action.type) {\n    case \"identity\":\n      return {\n        ...formState,\n        identity: action.value\n      };\n    case \"who\":\n      return {\n        ...formState,\n        who: action.value\n      };\n    case \"message\":\n      return {\n        ...formState,\n        message: action.value\n      };\n    case \"reset\":\n      return {\n        ...initialState\n      };\n    case \"submit\":\n      return {\n        ...formState\n      };\n    default:\n      break;\n  }\n};\n\nconst PostForm = () => {\n  const [formState, dispatchForm] = useReducer(formReducer, initialState);\n  const [open, setOpen] = useState(false);\n  const [sectionIndex, setSectionIndex] = useState(0);\n  const postSuccess = useSelector(state => state.postSuccess);\n  const postError = useSelector(state => state.error);\n  const postLoading = useSelector(state => state.loading);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (postSuccess) {\n      dispatchForm({ type: \"reset\" });\n      dispatch(submitPostReset());\n    }\n  }, [postSuccess, dispatch]);\n\n  const openHandler = () => setOpen(oldState => !oldState);\n\n  const switchHandler = (type, name, formValue) => {\n    if (type === \"next\" && sectionIndex === sections.length - 1) {\n      setSectionIndex(prevIndex => prevIndex);\n      dispatchForm({ type: name, value: formValue });\n    } else if (type === \"next\") {\n      setSectionIndex(prevIndex => prevIndex + 1);\n      dispatchForm({ type: name, value: formValue });\n    } else if (type === \"prev\") {\n      setSectionIndex(prevIndex => prevIndex - 1);\n      dispatchForm({ type: name, value: formValue });\n    } else {\n      dispatchForm({ type: name });\n      const id = Array(15)\n        .fill(null)\n        .map(() =>\n          Math.random()\n            .toString(36)\n            .substr(2)\n        )\n        .join(\"\");\n      const date = new Date();\n      const body = {\n        id,\n        date,\n        identity: formState.identity,\n        who: formState.who,\n        message: formState.message\n      };\n      dispatch(submitPost(body));\n      setSectionIndex(0);\n    }\n  };\n\n  const sections = [\n    <Identity\n      switchHandler={switchHandler}\n      identityValue={formState.identity}\n    />,\n    <Who switchHandler={switchHandler} whoValue={formState.who} />,\n    <Message switchHandler={switchHandler} messageValue={formState.message} />,\n    <Summary\n      switchHandler={switchHandler}\n      messageValue={formState.message}\n      whoValue={formState.who}\n      identityValue={formState.identity}\n    />\n  ];\n\n  let postFormBody = sections[sectionIndex];\n\n  if (postLoading) {\n    postFormBody = <FormSpinner />;\n  } else if (postError) {\n    postFormBody = postError;\n  }\n\n  return (\n    <>\n      <Modal open={open} openHandler={openHandler}>\n        {postFormBody}\n      </Modal>\n      <div className={styles.TextBox} onClick={() => openHandler()}>\n        Enter Here <span className={styles.TypeWriter}>|</span>\n      </div>\n    </>\n  );\n};\n\nexport default PostForm;\n"]},"metadata":{},"sourceType":"module"}